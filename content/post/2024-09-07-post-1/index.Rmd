---
title: Blog Post 1
author: Rachael Dziaba
date: '2024-09-07'
slug: post-1
categories:
  - blog
tags: []
---

In my first blog post of the series, I will be analyzing two foundational questions about the election: 
   1. How competitive are presidential elections in the United States? 
   2. Which states vote blue/red and how consistently?

I also will be customizing my visualizations (extension 1). See citations for data and other sources at the bottom. Code can be found in my Github repository.

## Historic Presidential Election Results ##

To explore how competitive presidential elections are, I took a look back at historic election data from 1948 to 2020. First, I cleaned and summarized the data. As can be seen in the table below, in the races since 1948, Democrats have won the popular vote 11 times whereas Republicans have won the popular vote 8 times. At first glance, it’s clear that elections have been fairly competitive although Democrats have a slight advantage, winning only 3 more races than Republicans or 15.79% more often. 

```{r table, echo=FALSE, warning=FALSE, message=FALSE}
# The following is based on code provided by Matthew Dardet in our first laboratory session. Datasets (unless otherwise noted) provided in class.

# Load libraries.
library(ggplot2)
library(maps)
library(tidyverse)
library(knitr)

# Set working directory
setwd("/Users/racha1/Desktop/election-blog/content/post/2024-09-07-post-1")

# Read presidential popular vote.
d_popvote <- read_csv("popvote_1948-2020.csv", show_col_types = FALSE)

# Pivot data to wide format with party names as columns and two-party vote share as values.
d_popvote_wide <- d_popvote %>%
    select(year, party, pv2p) %>%
    pivot_wider(names_from = party, values_from = pv2p)

# Modify winner column to show "D" if Democrats win and "R" if Republicans win.
d_popvote_wide <- d_popvote_wide %>% 
    mutate(winner = case_when(democrat > republican ~ "D",
                              TRUE ~ "R"))

# Summarize data to show winners.
summary_table <- d_popvote_wide %>%
  group_by(winner) %>%
  summarise(races = n())

# Present in table
print(summary_table)
```
It’s important to acknowledge this calculation is solely based on the popular vote. Democrats actually only won 9 elections, and Republicans won 10 in this timespan(1). The two exceptions were 2000 (the infamous Bush v. Gore Supreme Court case) and 2016 (where Hillary Clinton won the popular vote but not the electoral college). Many scholars and analysts have argued that the electoral college is biased in favor of Republican candidates(2)—a topic I hope to explore in further detail in future blog posts. 

For now, however, we can conclude that elections as a whole have been historically competitive between Democrats and Republicans, as they are nearly tied in electoral college results.

To zoom in on individual races, I created a line plot (seen below) that displays the popular vote share for each party’s candidate by year, excluding third-party candidates. 

```{r plot1, echo=FALSE, warning=FALSE, message=FALSE}

# Set custom theme for plots
my_custom_theme <- theme_bw() + 
  theme(panel.border = element_blank(),
        plot.title = element_text(family = "Georgia", size = 15, face = "bold", hjust = 0.5),
        axis.text = element_text(family = "Georgia", size = 12),
        axis.line = element_line(colour = "black"),
        legend.position = "bottom",
        legend.title = element_text(family = "Georgia", size = 12),
        legend.text = element_text(family = "Georgia", size = 12),
        legend.box.background = element_rect(color = "black", size = 0.5), 
        axis.title.x = element_text(family = "Georgia", size = 13),
        axis.title.y = element_text(family = "Georgia", size = 13))

# Create and customize line plot to visualize 
line_plot <- d_popvote %>%
  ggplot(aes(x = year, y = pv2p, color = party)) + 
  geom_line() +
  geom_point(size = 2) +
  scale_color_manual(values = c("royalblue3", "red3"), labels = c("Democrat", "Republican")) +
  ggtitle("Two-Party Presidential Vote Share, 1948 - 2020") +
  labs(x = "Year", y = "Popular Vote Percentage", color = "Party:") +
  my_custom_theme

line_plot

```
One immediate observation from this plot is that the margin of win is notably smaller in the 21st century than the 20th. From 2000 on, the winning candidate has won the popular vote by single digits. The 20+ percent wins of 1964 (Lyndon B. Johnson) and 1972 (Richard Nixon) are no longer par for the course. That said, the later half of the 20th century did vary between these massive wins and extremely close elections (see 1960, 1968, and 1976). 

The elections from 1948-2000 also appear to cycle fairly evenly between Republican wins and Democratic ones. In the 21st century thus far, however, we can see that Democrats have won the popular vote pretty consistently (⅚ races). These races have also become more reliably competitive, likely as a result of increasing political polarization and partisanship (3). As a result, I’d expect the 2024 popular vote to be quite close, with a margin of less than 10%, and, based solely on this plot, lean Democratic.

## Variation Between States

In order to gain a better understanding of election results, we must dive deeper into the state-by-state data. The winner of each state’s electoral college votes is determined by that state’s popular vote, with all but two states (Nebraska and Maine) being winner take all. 

The animated map below illustrates the winner of the popular vote in each state (excluding third-party candidates) from 1948 to 2020. Each state’s label can be seen by hovering over it.

```{r plot2, echo=FALSE, warning=FALSE, message=FALSE}

# The following is a combination of code provided by Matthew Dardet and code used in Ethan Jasny's "Blog Post 1" from 2022 (https://ethanjasny.github.io/gov1347/post/2022-09-09-test-post-1/)

# Load libraries
library(usmap)
library(plotly)

d_pvstate_wide <- read_csv("clean_wide_state_2pv_1948_2020.csv", show_col_types = FALSE)

# State abbreviation data downloaded from Jason Ong's github (https://github.com/jasonong/List-of-US-States/blob/master/states.csv?plain=1)

# Read state abbreviations
state.abbrevs <- read_csv("states.csv", show_col_types = FALSE)

# Modify winner column to be "1" if Republicans win and "-1" if Democrats win.
winners_map <- d_pvstate_wide %>% 
  mutate(winner = ifelse(R_pv > D_pv, 1, -1)) %>%
# Join with state abbreviation dataset
  left_join(state.abbrevs, by = c("state" = "State"))

# Define map layout (source: Ethan Jasny)
map_layout <- list(
  scope = 'usa',
  projection = list(type = 'albers usa'),
  showlakes = FALSE,
  lakecolor = toRGB('white'))

# Create map of winners in each state over time
# Code for type, colorscale, text, and hoverinfo developed with assistance from ChatGPT 

winners_map_figure <- winners_map %>% plot_geo(locationmode = "USA-states") %>% 
  add_trace(type = 'choropleth', z = ~winner, locations = ~Abbreviation,
            colorscale = list(c(0, 'royalblue3'), c(0.5, 'white'), c(1, 'red3')),
            zmin = -1,
            zmax = 1,
            frame = ~year, 
            showscale = FALSE,
            text = ~paste(Abbreviation),
            hoverinfo = 'text') %>%
              layout(title = "Two-Party Presidential Popular Vote Winner by State, 1948-2020", font = list(family = "Georgia"),
                     geo = map_layout)

winners_map_figure
```

By watching the timeline, we can see that certain states have quite consistently voted red or blue while others have shifted throughout time (and some—the “swing states”—change year-to-year). For instance, the West North Central (the Dakotas, Nebraska, Kansas) and some Mountain states (Wyoming, Idaho) voted red throughout almost all of the elections seen. These states are predominantly rural, following the urban-rural divide between Democrats and Republicans. 

The most stark shift in state voting habits captured by this map is the domination of the Northeast by Democrats and the South by Republicans, part of the “twentieth-century reversal” attributed to a combination of race and the Civil Rights movement, economic differences, and other social factors by scholars (4).

This change eventually led to the map familiar today: the Northeast, West Coast, and Illinois solidly blue, and the South, Mountain states, and West North Central red.

However, we can also see how certain states have changed in the past twenty years or become swing states up for contention. These changes are usually the results of demographic shifts within the state, a variable I will hopefully explore in a later blog.

The following map, which displays the popular vote margin, provides a close view at battleground states.

```{r plot3, echo=FALSE, warning=FALSE, message=FALSE}

# The following is adapted from the above, combining code provided by Matthew Dardet and code used in Ethan Jasny's "Blog Post 1" from 2022 (https://ethanjasny.github.io/gov1347/post/2022-09-09-test-post-1/)
 
# Load libraries
library(usmap)
library(plotly)

# Read state abbreviation data (source: Jason Ong)
state.abbrevs <- read_csv("states.csv", show_col_types = FALSE)

# Modify winner column to say Republican if Republicans won and Democrats if Democrats won. Modify margin to be the difference in the two-party popular votes. Join with state abbreviation data
margin_map <- d_pvstate_wide %>% 
  mutate(winner = ifelse(R_pv > D_pv, "Republican", "Democrat"), margin = R_pv2p - D_pv2p) %>%
  left_join(state.abbrevs, by = c("state" = "State"))

# Set map layout.
map_layout <- list(
  scope = 'usa',
  projection = list(type = 'albers usa'),
  showlakes = FALSE,
  lakecolor = toRGB('white'))

# Create map of margins in each state.
# Code for text and colorbar developed with assistance of ChatGPT
margin_map_figure <- margin_map %>% plot_geo(locationmode = "USA-states") %>% 
  add_trace(type = 'choropleth', z = ~margin, locations = ~Abbreviation,
            colorscale = list(c(0, 'royalblue3'), c(0.5, 'white'), c(1, 'red3')),
            zmin = -100,
            zmax = 100,
            frame = ~year, 
            showscale = TRUE,
            text = ~paste(Abbreviation, "<br>",
                          "Democratic:", round(D_pv2p, 1),"%<br>",
                          "Republican:", round(R_pv2p, 1),"%<br>"),
            hoverinfo = 'text',
            colorbar = list(title = "Popular Vote Margin <br> (Rep-Dem)", 
                            tickvals = c(-100, -50, -25, 0, 25, 50, 100),
                            ticktext = c("-100", "-50", "-25", "0", "25", "50", "100"))) %>%
              layout(title = "Two-Party Presidential Vote Share by State, 1948-2020", font = list(family = "Georgia"),
                     geo = map_layout)

margin_map_figure
```

As would be expected, the states with a narrower win margin (lighter color) are the ones that have historically “swung”, such as Florida in 2016 or Arizona in 2020. Therefore, based on the 2020 map, I’d expect Wisconsin, Michigan, Pennsylvania, North Carolina, Georgia, Florida, Arizona, Texas, and Nevada to have close margins in 2024. Looking at the voter shares more in-depth (by hovering over each state), those with a less than 3 percent margin—the “swing states”—are Wisconsin, Michigan, Pennsylvania, North Carolina, Georgia, Arizona, and Nevada.

## Prediction

My first prediction for 2024 is based on the simplified electoral cycle model provided by Matthew Dardet. I calculated the two-party popular vote in each state by taking ¾ of the voter share from the previous election (2020) and ¼ of the voter share from the election before that (2016) for each party.

The map below illustrates the prediction with the projected popular vote margin in each state. As described earlier, based on the historic data of the previous two elections, we can again see the same “swing states” will likely have close margins.  

```{r predictionmap, echo = FALSE, warning=FALSE, message=FALSE}

# The following is based on code provided by Matthew Dardet.

# Read presidential popular vote.
d_popvote <- read_csv("popvote_1948-2020.csv", show_col_types = FALSE)

# Pivot data to wide format with party names as columns and two-party vote share as values.
d_popvote_wide <- d_popvote %>%
    select(year, party, pv2p) %>%
    pivot_wider(names_from = party, values_from = pv2p)

# Modify winner column to show "D" if Democrats win and "R" if Republicans win.
d_popvote_wide <- d_popvote_wide %>% 
    mutate(winner = case_when(democrat > republican ~ "D",
                              TRUE ~ "R"))

# Sequester shapefile of states from `maps` library.
states_map <- map_data("state")

# Merge d_pvstate_wide with state_map.
d_pvstate_wide$region <- tolower(d_pvstate_wide$state)

# Create prediction (pv2p and margin) based on simplified electoral cycle model:
# vote_2024 = 3/4*vote_2020 + 1/4*vote_2016 (lag1, lag2, respectively). 
pv2p_2024_states <- d_pvstate_wide %>%
  filter(year == 2020) %>%
  group_by(state) %>% 
  summarize(D_pv2p_2024 = 0.75*D_pv2p + 0.25*D_pv2p_lag1, 
            R_pv2p_2024 = 0.75*R_pv2p + 0.25*R_pv2p_lag1) %>% 
  mutate(pv2p_2024_margin = R_pv2p_2024 - D_pv2p_2024,
         region = tolower(state))

# Plot the margin of victory in a U.S. state map.
# Code for map sizing (to fix shrinkage) developed with assistance of ChatGPT
map_2024 <-pv2p_2024_states %>%
  left_join(states_map, by = "region") %>%
  ggplot(aes(long, lat, group = group)) + 
  geom_polygon(aes(fill = pv2p_2024_margin), color = "black") + 
  scale_fill_gradient2(high = "red3", 
                       low = "royalblue3", 
                       mid = "white", 
                       name = "Popular Vote Margin\n(Rep-Dem)", 
                       breaks = c(-50, -25, 0, 25, 50), 
                       limits = c(-50, 50)) + 
  ggtitle("Projected Two-Party Presidential Vote Share in 2024") +
  theme_void() +
  coord_map("albers", lat0 = 39, lat1 = 45) +
  theme(text = element_text(family = "Georgia"))
  
  map_2024
```
Then, by computing the electoral votes for each state based on its projected two-party popular vote, I predicted that Kamala Harris would win the election with 276 electoral votes. 

```{r prediction, echo = FALSE, warning=FALSE, message=FALSE}

# Read electoral college votes. 
ec <- read_csv("ec_full (1).csv", show_col_types = FALSE)

# Modify winner column again and join with electoral college votes
pv2p_2024_states <- pv2p_2024_states %>%
  mutate(year = 2024, 
         winner = ifelse(R_pv2p_2024 > D_pv2p_2024, "R", "D")) %>% 
  left_join(ec, by = c("state", "year"))

# Generate summary of electoral college winner by combining projected state winners.
winner_2024 <- pv2p_2024_states %>%
  group_by(winner) %>%
  summarize(electoral_votes = sum(electors))

# Show electoral college summaries
print(winner_2024)
```
## Citations
   1. “2020: The American Presidency Project.” The American Presidency Project. Accessed September 9, 2024. https://www.presidency.ucsb.edu/statistics/elections/2020. 
   2. “The Republican Electoral College Advantage.” Cook Political Report. Accessed September 9, 2024. https://www.cookpolitical.com/cook-pvi/2022-partisan-voter-index/republican-electoral-college-advantage. 
   3. Geoffreyvs. “Are Blowout Presidential Elections a Thing of the Past?” FiveThirtyEight, May 28, 2019. https://fivethirtyeight.com/features/are-blowout-presidential-elections-a-thing-of-the-past/. 
   4. Monkovic, Toni. “50 Years of Electoral College Maps: How the U.S. Turned Red and Blue.” The New York Times, August 22, 2016. https://www.nytimes.com/2016/08/23/upshot/50-years-of-electoral-college-maps-how-the-us-turned-red-and-blue.html. 

## Data Sources

Presidential Popular Votes, 1948-2024. Provided by Matthew Dardet.
State Popular Votes, 1948-2024. Provided by Matthew Dardet.
Electoral College Votes Per State. Provided by Matthew Dardet.
State Abbreviations. Downloaded from Jason Ong’s GitHub, https://github.com/jasonong/List-of-US-States/blob/master/states.csv 



